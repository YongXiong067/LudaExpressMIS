<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>省人防办项目管理系统-项目入库</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="plugins/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="plugins/font-awesome/css/font-awesome.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="plugins/dist/css/AdminLTE.min.css">

    <link rel="stylesheet" href="plugins/dist/css/skins/skin-blue.min.css">

    <!-- Vue.js / ajax -->
    <script src="plugins/vue/vue.min.js"></script>

    <script src="plugins/axios/axios.min.js"></script>

    <!-- 公共css样式 -->
    <link rel="stylesheet" href="css/commer.css">

    <!-- 弹出框插件 toastr.css -->
    <link rel="stylesheet" href="plugins/toastr/toastr.min.css">

    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body class="hold-transition skin-blue sidebar-mini">
    <div class="wrapper" id="app" v-cloak>

        <!-- 顶部导航栏 -->
        <n-nav-top :user="user" :news="systemNews" v-on:cancellation="cancellation"></n-nav-top>

        <!-- 修改密码模态框 -->
        <n-nav-pwdmodel :user="user" :model="pwdModel" v-on:updatepwd="updatePwd"></n-nav-pwdmodel>

        <!-- 左侧导航栏 -->
        <n-nav-left :user="user" :page="pagePosition" :rol="userRol"></n-nav-left>

        <!-- 右侧内容栏 -->
        <div class="content-wrapper">
            <!-- 内容栏标题导航 -->
            <n-page-nav :page="pagePosition"></n-page-nav>

            <!-- 右侧内容界面-记录列表 -->
            <section class="content" v-if="contentTagle">

                <div class="row">
                    <div class="col-xs-12">
                        <div class="box">
                            <div class="box-header">
                                <div class="row">
                                    <div class="col-md-1 col-xs-3 pr-0" style="padding-top: 6px;">
                                        <h4 class="box-title">合同列表</h4>
                                    </div>
                                    <!-- 添加 刷新 导入 导出-->
                                    <div class="col-md-3 col-xs-5 pr-0">
                                        <div class="row">
                                            <div class="col-md-2 col-xs-0 p-0">
                                            </div>
                                            <div class="col-md-10 col-xs-12 p-0">
                                                <div class="btn-group">
                                                    <a href="javaScript:void(0);" title="添加" data-toggle="modal"
                                                        data-target="#modelAdd"><button
                                                            class="btn btn-default btn-sm"><i
                                                                class="fa fa-plus"></i></button></a>
                                                    <a href="" title="关联合同" data-toggle="modal"
                                                        data-target="#modelCont"><button class="btn btn-default btn-sm"
                                                            style="padding: 5px 8px 5px 8px;"><i
                                                                class="fa fa-exchange"></i></button></a>
                                                    <a href="javaScript:void(0);" @click="excelExport()"
                                                        title="导出Excel表格"><button class="btn btn-default btn-sm"><i
                                                                class="fa fa-arrow-circle-down"></i></button></a>

                                                    <a href="javaScript:void(0);" title="选择过滤条件" data-toggle="modal"
                                                        data-target="#modelChange"><button
                                                            class="btn btn-default btn-sm ml-1"><i
                                                                class="fa fa-reorder"></i></button></a>
                                                    <a href="javaScript:void(0);" @click="refresh()" title="刷新"><button
                                                            class="btn btn-default btn-sm"><i
                                                                class="fa fa-refresh"></i></button></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 搜索 -->
                                    <div class="col-md-2 col-xs-4">
                                        <div class="box-tools pull-right">
                                            <div class="input-group">
                                                <input type="text" v-model="beanSearch"
                                                    class="form-control input-sm pull-right" placeholder="Search">
                                                <div class="input-group-btn">
                                                    <button class="btn btn-sm btn-default" @click="search()"><i
                                                            class="fa fa-search"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 列表分页 -->
                                    <div class="col-md-6 col-xs-12 p-0">
                                        <div class="row p-0">
                                            <div class="col-md-10 col-xs-10 p-0">
                                                <div class="box-tools pull-right">
                                                    <ul class="pagination pagination-sm no-margin ">
                                                        <li><span>{{limitData.page}} / {{pages}}</span>
                                                        </li>
                                                        <li><a href="javaScript:void(0);"
                                                                @click="limit_page('first')">首页</a></li>
                                                        <li><a href="javaScript:void(0);"
                                                                @click="limit_page('pre')">&laquo;</a></li>
                                                        <li v-if="(limitData.page - 4) > 0 && limitData.page >= pages">
                                                            <a href="javaScript:void(0);"
                                                                @click="limit_page(limitData.page - 4)">{{limitData.page - 4}}</a>
                                                        </li>
                                                        <li
                                                            v-if="(limitData.page - 3) > 0 && limitData.page >= pages - 1">
                                                            <a href="javaScript:void(0);"
                                                                @click="limit_page(limitData.page - 3)">{{limitData.page - 3}}</a>
                                                        </li>
                                                        <li v-if="limitData.page-2 > 0"><a href="javaScript:void(0);"
                                                                @click="limit_page(limitData.page - 2)">{{limitData.page - 2}}</a>
                                                        </li>
                                                        <li v-if="limitData.page-1 > 0"><a href="javaScript:void(0);"
                                                                @click="limit_page(limitData.page - 1)">{{limitData.page - 1}}</a>
                                                        </li>
                                                        <li class="active"><a
                                                                href="javaScript:void(0);">{{limitData.page}}</a></li>
                                                        <li v-if="(limitData.page + 1) <= pages "> <a
                                                                href="javaScript:void(0);"
                                                                @click="limit_page(limitData.page + 1)">{{limitData.page + 1}}</a>
                                                        </li>
                                                        <li v-if="(limitData.page + 2) <= pages "><a
                                                                href="javaScript:void(0);"
                                                                @click="limit_page(limitData.page + 2)">{{limitData.page + 2}}</a>
                                                        </li>
                                                        <li v-if="(limitData.page + 3) <= pages && limitData.page <= 2">
                                                            <a href="javaScript:void(0);"
                                                                @click="limit_page(limitData.page+3)">{{limitData.page + 3}}</a>
                                                        </li>
                                                        <li v-if="(limitData.page + 4) <= pages && limitData.page <= 1">
                                                            <a href="javaScript:void(0);"
                                                                @click="limit_page(limitData.page+4)">{{limitData.page + 4}}</a>
                                                        </li>
                                                        <li><a href="javaScript:void(0);"
                                                                @click="limit_page('next')">&raquo;</a></li>
                                                        <li><a href="javaScript:void(0);"
                                                                @click="limit_page('last')">末页</a></li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="col-md-2 col-xs-2 p-0">
                                                <div class="row">
                                                    <div class="col-md-5 col-xs-5 pr-0 ">
                                                        <input type="text" v-model="limitData.page_go"
                                                            class="form-control input-sm" style="width: 100%;"
                                                            placeholder="Go">
                                                    </div>
                                                    <div class="col-md-4 col-xs-4 p-0 m-0">
                                                        <div class="input-group-btn">
                                                            <button class="btn btn-sm btn-default"
                                                                @click="limit_page_go()"><i
                                                                    class="fa fa-sign-in"></i></button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="box-body table-responsive no-padding">
                                <ul class="todo-list">
                                    <li>
                                        <div class="row p-0 m-0 text-center">
                                            <div class="col-md-4">
                                                <div class="row">
                                                    <div class="col-md-1 col-xs-2 p-0"><span class="text">ID</span>
                                                    </div>
                                                    <div class="col-md-8 col-xs-2 p-0"><span class="text">合同名称</span>
                                                    </div>
                                                    <div class="col-md-3 col-xs-2 p-0"><span class="text">签订机构</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="row">
                                                    <div class="col-md-3 col-xs-2 p-0"><span class="text">签订金额</span>
                                                    </div>
                                                    <div class="col-md-4 col-xs-2 p-0"><span class="text">签订日期</span>
                                                    </div>
                                                    <div class="col-md-2 col-xs-2 p-0"><span class="text">年限</span>
                                                    </div>
                                                    <div class="col-md-3 col-xs-2 p-0"><span class="text">付款方式</span>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="row">
                                                    <div class="col-md-6 col-xs-2 p-0"><span class="text">合同资料</span>
                                                    </div>
                                                    <div class="col-md-3 col-xs-2 p-0"><span class="text">合同状态</span>
                                                    </div>
                                                    <div class="col-md-3 col-xs-2 p-0"><span class="text">操作</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li v-for="(item, index) in limitData.list">
                                        <div class="row p-0 m-0 text-center">
                                            <div class="col-md-4">
                                                <div class="row">
                                                    <div class="col-md-1 col-xs-2 p-0"><span>{{item.c_id}}</span>
                                                    </div>
                                                    <div class="col-md-8 col-xs-2 p-0 text-oneline"><span><a
                                                                href="javascript:;" @click="contentChange(item)"
                                                                :title="item.name">{{item.c_name}}</a></span>
                                                    </div>
                                                    <div class="col-md-3 col-xs-2 p-0 text-oneline">
                                                        <span>{{item.supplier}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="row">
                                                    <div class="col-md-3 col-xs-2 p-0"><span
                                                            style="color: green;">{{item.signed_money}}<i
                                                                class="fa fa-cny"></i></span>
                                                    </div>
                                                    <div class="col-md-4 col-xs-2 p-0 text-oneline">
                                                        <span>{{item.signed_time}}</span>
                                                    </div>
                                                    <div class="col-md-2 col-xs-2 p-0"><span>{{item.years}} 年</span>
                                                    </div>
                                                    <div class="col-md-3 col-xs-2 p-0 text-oneline">
                                                        <span>{{item.mode}}</span>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="row">
                                                    <div class="col-md-6 col-xs-2 p-0 text-oneline"><a
                                                            :href="'api/v2/db/open?fileurl='+item.fileUrl"
                                                            target="_blank" title="点击查看文件"><span><i
                                                                    class="fa fa-paperclip"></i> &nbsp;
                                                                {{item.fileName}}</span></a>
                                                    </div>
                                                    <div class="col-md-3 col-xs-2 p-0">
                                                        <span v-if="item.tagle == 1" style="color: green;">正常</span>
                                                        <span v-if="item.tagle == 0" style="color: red;">终止</span>
                                                    </div>
                                                    <div class="col-md-3 col-xs-2 p-0">
                                                        <div class="tools">
                                                            <a :href="'api/v2/db/dowlond?fileurl='+item.fileUrl"
                                                                target="_blank" title="点击下载文件">
                                                                <i class="fa fa-cloud-download"
                                                                    style="margin-right: 5px;"></i>
                                                            </a>
                                                            <a href="javascript:;" title="上传文件" data-toggle="modal"
                                                                data-target="#modelFile" @click="file(item)">
                                                                <i class="fa fa-cloud-upload"
                                                                    style="margin-right: 5px;"></i>
                                                            </a>
                                                            <a href="javascript:;" title="修改" data-toggle="modal"
                                                                data-target="#modelUpdate" @click="update(item)">
                                                                <i class="fa fa-edit" style="margin-right: 5px;"></i>
                                                            </a>
                                                            <a href="javascript:;" @click="deleteProject(item.c_id)"
                                                                title="删除"> <i class="fa fa-trash-o"
                                                                    style="margin-right: 5px;"></i> </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="row m-0">
                                            <div class="col-md-12 p-0 m-0 text-center">
                                                <span>
                                                    显示第<code>{{page_first}}</code>到第<code>{{page_last}}</code>条记录，
                                                    总共<code>{{limitData.nums}}</code>条记录 每页显示
                                                    <input type="text" v-model="limitData.line" style="width: 30px;"
                                                        @blur="beanPosition_change()"> 条记录
                                                </span>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>

                            <!-- 修改模态框 -->
                            <div class="modal fade" id="modelUpdate" tabindex="-1" role="dialog"
                                aria-labelledby="modelUpdateTit" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h4 class="modal-title" id="modelUpdateTit">修改记录信息 <i
                                                    class="fa fa-edit"></i></h4>
                                        </div>
                                        <div class="modal-body">
                                            <div class="form-group ">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">合同编号</span>
                                                            <input type="text" v-model="modalUpdate.c_no"
                                                                class="form-control" placeholder="请填写该字段" required>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group ">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">合同名称</span>
                                                            <input type="text" v-model="modalUpdate.c_name"
                                                                class="form-control" placeholder="请填写该字段" required>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group ">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">公司名称</span>
                                                            <input type="text" v-model="modalUpdate.supplier"
                                                                class="form-control" placeholder="请填写该字段" required>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">负责人</span>
                                                            <input type="text" v-model="modalUpdate.person"
                                                                class="form-control" placeholder="请填写该字段" required>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">联系方式</span>
                                                            <input type="text" v-model="modalUpdate.phone"
                                                                class="form-control" placeholder="请填写该字段" required>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">签订金额</span>
                                                            <input type="text" class="form-control"
                                                                v-model="modalUpdate.signed_money">
                                                            <span class="input-group-addon">
                                                                <i class="fa fa-cny"></i>
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">已付款金额</span>
                                                            <input type="text" class="form-control"
                                                                v-model="modalUpdate.payment_money">
                                                            <span class="input-group-addon">
                                                                <i class="fa fa-cny"></i>
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">签订年限</span>
                                                            <input type="text" v-model="modalUpdate.years"
                                                                class="form-control">
                                                            <span class="input-group-addon">
                                                                年
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div
                                                            style="height: 230px; border: 0.5px solid rgb(219, 219, 219); line-height: 35px;">
                                                            <div class="display-in"
                                                                style="padding-left: 6px; font-size: 16px;">
                                                                付款方式
                                                            </div>
                                                            <div class="float-r">
                                                                <button type="button" class="btn btn-primary p-0 mr-2"
                                                                    @click="addPer('0')"
                                                                    style=" padding: 4px 8px 4px 8px; font-size: 14px;">添加</button>
                                                            </div>
                                                            <hr style="padding: 0px; margin: 0px;" />

                                                            <div
                                                                style="font-size: 12px; height: 190px; overflow: auto;">
                                                                <div class="row p-0 m-0">
                                                                    <div class="col-md-2 col-sm-2 p-0 m-0 pl-1">
                                                                        付款次序
                                                                    </div>
                                                                    <div class="col-md-4 col-sm-4 p-0 m-0">
                                                                        款项名称
                                                                    </div>
                                                                    <div class="col-md-3 col-sm-3 p-0 m-0">
                                                                        付款百分比
                                                                    </div>
                                                                    <div class="col-md-1 col-sm-1"></div>
                                                                    <div class="col-md-2 col-sm-2">
                                                                        操作
                                                                    </div>
                                                                </div>
                                                                <!-- 项目li -->
                                                                <div class="hover-light"
                                                                    v-for="(item, i) in modalUpdate.paylist"
                                                                    style="line-height: 35px;">
                                                                    <div class="row p-0 m-0">
                                                                        <div class="col-md-2 col-sm-2 pl-3">
                                                                            <span>{{i+1}}</span>
                                                                        </div>
                                                                        <div class="col-md-4 col-sm-4 p-0 m-0">
                                                                            <input type="text "
                                                                                v-model="modalUpdate.paylist[i].name"
                                                                                class="form-control wh-12">
                                                                        </div>
                                                                        <div class="col-md-3 col-sm-3 p-0 m-0">
                                                                            <input type="text"
                                                                                v-model="modalUpdate.paylist[i].per"
                                                                                class="form-control display-in wh-6"> <b
                                                                                class="display-in"> %</b>
                                                                        </div>
                                                                        <div class="col-md-1 col-sm-1"></div>
                                                                        <div class="col-md-2 col-sm-2 pl-2">
                                                                            <a href="javascript:;" title="删除"
                                                                                @click="deletePer(i, '0')"
                                                                                class="color-black">
                                                                                <i class="fa fa-close"></i>
                                                                            </a>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">签订时间</span>
                                                            <input type="date" v-model="modalUpdate.signed_time"
                                                                class="form-control" />
                                                            <span class="input-group-addon">
                                                                <i class="fa fa-calendar"></i>
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-dismiss="modal">取消</button>
                                            <button type="button" class="btn btn-primary" data-dismiss="modal"
                                                @click="updateSubmit()">提交</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- 添加模态框 -->
                            <div class="modal fade" id="modelAdd" tabindex="-1" role="dialog"
                                aria-labelledby="modelAddTit" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h4 class="modal-title" id="modelAddTit">添加合同信息 <i class="fa fa-plus"></i>
                                            </h4>
                                        </div>
                                        <div class="modal-body">
                                            <div class="form-group ">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">采购编号<b
                                                                    class="color-danger">*</b></span>
                                                            <input type="text" v-model="modalAdd.c_no"
                                                                class="form-control" placeholder="请填写该字段"
                                                                @blur="inputText(modalAdd.c_no)">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group ">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">合同名称<b
                                                                    class="color-danger">*</b></span>
                                                            <input type="text" v-model="modalAdd.c_name"
                                                                class="form-control" placeholder="请填写该字段"
                                                                @blur="inputText(modalAdd.c_name)">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group ">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">公司名称<b
                                                                    class="color-danger">*</b></span>
                                                            <input type="text" v-model="modalAdd.supplier"
                                                                class="form-control" placeholder="请填写该字段"
                                                                @blur="inputText(modalAdd.supplier)">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">负责人<b
                                                                    class="color-danger">*</b></span>
                                                            <input type="text" v-model="modalAdd.person"
                                                                class="form-control" placeholder="请填写该字段"
                                                                @blur="inputText(modalAdd.person)">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">联系方式</span>
                                                            <input type="text" v-model="modalAdd.phone"
                                                                class="form-control" placeholder="请填写该字段">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">签订金额<b
                                                                    class="color-danger">*</b></span>
                                                            <input type="text" class="form-control"
                                                                v-model="modalAdd.signed_money"
                                                                @blur="inputNumber(modalAdd.signed_money)">
                                                            <span class="input-group-addon">
                                                                <i class="fa fa-cny"></i>
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">已付款金额</span>
                                                            <input type="text" class="form-control"
                                                                v-model="modalAdd.payment_money">
                                                            <span class="input-group-addon">
                                                                <i class="fa fa-cny"></i>
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">签订年限</span>
                                                            <input type="text" v-model="modalAdd.years"
                                                                @blur="inputNumber(modalAdd.years)"
                                                                class="form-control">
                                                            <span class="input-group-addon">
                                                                年
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div
                                                            style="height: 230px; border: 0.5px solid rgb(219, 219, 219); line-height: 35px;">
                                                            <div class="display-in"
                                                                style="padding-left: 6px; font-size: 16px;">
                                                                付款方式
                                                            </div>
                                                            <div class="float-r">
                                                                <button type="button" class="btn btn-primary p-0 mr-2"
                                                                    @click="addPer('1')"
                                                                    style=" padding: 4px 8px 4px 8px; font-size: 14px;">添加</button>
                                                            </div>
                                                            <hr style="padding: 0px; margin: 0px;" />

                                                            <div
                                                                style="font-size: 12px; height: 190px; overflow: auto;">
                                                                <div class="row p-0 m-0">
                                                                    <div class="col-md-2 col-sm-2 p-0 m-0 pl-1">
                                                                        付款次序
                                                                    </div>
                                                                    <div class="col-md-4 col-sm-4 p-0 m-0">
                                                                        款项名称
                                                                    </div>
                                                                    <div class="col-md-3 col-sm-3 p-0 m-0">
                                                                        付款百分比
                                                                    </div>
                                                                    <div class="col-md-1 col-sm-1"></div>
                                                                    <div class="col-md-2 col-sm-2">
                                                                        操作
                                                                    </div>
                                                                </div>
                                                                <!-- 项目li -->
                                                                <div class="hover-light"
                                                                    v-for="(item, i) in modalAdd.paylist"
                                                                    style="line-height: 35px;">
                                                                    <div class="row p-0 m-0">
                                                                        <div class="col-md-2 col-sm-2 pl-3">
                                                                            <span>{{i+1}}</span>
                                                                        </div>
                                                                        <div class="col-md-4 col-sm-4 p-0 m-0">
                                                                            <input type="text "
                                                                                v-model="modalAdd.paylist[i].name"
                                                                                class="form-control wh-12">
                                                                        </div>
                                                                        <div class="col-md-3 col-sm-3 p-0 m-0">
                                                                            <input type="text"
                                                                                v-model="modalAdd.paylist[i].per"
                                                                                class="form-control display-in wh-6"> <b
                                                                                class="display-in"> %</b>
                                                                        </div>
                                                                        <div class="col-md-1 col-sm-1"></div>
                                                                        <div class="col-md-2 col-sm-2 pl-2">
                                                                            <a href="javascript:;" title="删除"
                                                                                @click="deletePer(i, '1')"
                                                                                class="color-black">
                                                                                <i class="fa fa-close"></i>
                                                                            </a>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">签订时间<b
                                                                    class="color-danger">*</b></span>
                                                            <input type="date" v-model="modalAdd.signed_time"
                                                                class="form-control" />
                                                            <span class="input-group-addon">
                                                                <i class="fa fa-calendar"></i>
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon"><i
                                                                    class="fa fa-file"></i></span>
                                                            <input type="file" name="file" id="uploadFile"
                                                                @change="fileUpload('uploadFile')" class="form-control">
                                                        </div>
                                                        <div>
                                                            <p>须知：上传文件大小不超过20MB; 下载模板：<a
                                                                    :href="'api/v2/db/dowlond?fileurl=File/model/合同模板.doc'"
                                                                    target="_blank" title="点击下载文件">合同模板.doc</a></p>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary"
                                                    data-dismiss="modal">取消</button>
                                                <button type="button" class="btn btn-primary" data-dismiss="modal"
                                                    @click="addSubmit()">提交</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 过滤模态框 -->
                            <div class="modal fade" id="modelChange" tabindex="-1" role="dialog"
                                aria-labelledby="modelChangeTit" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h4 class="modal-title" id="modelChangeTit">过滤条件选择 <i
                                                    class="fa fa-reorder"></i>
                                            </h4>
                                        </div>
                                        <div class="modal-body">
                                            <div class="form-group mt-1">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">归属处室</span>
                                                            <select class="form-control" @change="beanPosition_change()"
                                                                v-model="beanChange.beanPosition">
                                                                <option selected="selected" value="0">---归属处室---
                                                                </option>
                                                                <option v-for="p in positionList" :value="p.key">
                                                                    {{p.value}}
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group mt-1">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">年份</span>
                                                            <select class="form-control" @change="beanPosition_change()"
                                                                v-model="beanChange.beanYear">
                                                                <option selected="selected" value="0">---选择年份---
                                                                </option>
                                                                <option value="2019">2019年</option>
                                                                <option value="2018">2018年</option>
                                                                <option value="2017">2017年</option>
                                                                <option value="2016">2016年</option>
                                                                <option value="2015">2015年</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group mt-1">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">状态</span>
                                                            <select class="form-control" @change="beanPosition_change()"
                                                                v-model="beanChange.beanTagle">
                                                                <option selected="selected" value="">---选择状态---
                                                                </option>
                                                                <option value="1">正常</option>
                                                                <option value="0">终止</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- 文件上传模态框 -->
                            <div class="modal fade" id="modelFile" tabindex="-1" role="dialog"
                                aria-labelledby="modelFileTit" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h4 class="modal-title" id="modelFileTit">文件上传 <i class="fa fa-file-o"></i>
                                            </h4>
                                        </div>
                                        <div class="modal-body">
                                            <div class="form-group ">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">项目名称</span>
                                                            <input type="text" class="form-control"
                                                                v-model="modalFile.c_name" placeholder="项目名" disabled>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">原文件路径</span>
                                                            <input type="text" v-model="modalFile.fileName"
                                                                class="form-control" placeholder="暂无" disabled>

                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon"><i
                                                                    class="fa fa-file"></i></span>
                                                            <input type="file" name="file" id="updateFile"
                                                                @change="fileUpload('updateFile')" class="form-control">
                                                        </div>
                                                        <div>
                                                            <p>须知：上传文件大小不超过20MB; 下载模板：<a
                                                                    :href="'api/v2/db/dowlond?fileurl=File/model/合同模板.doc'"
                                                                    target="_blank" title="点击下载文件">合同模板.doc</a></p>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-dismiss="modal">取消</button>
                                            <button type="button" class="btn btn-primary" data-dismiss="modal"
                                                @click="fileSubmit()">提交</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- 关联合同模态框 -->
                            <div class="modal fade" id="modelCont" tabindex="-1" role="dialog"
                                aria-labelledby="modelContTit" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h4 class="modal-title" id="modelContTit">关联合同信息 <i
                                                    class="fa fa-exchange"></i>
                                            </h4>
                                        </div>
                                        <div class="modal-body">
                                            <div class="form-group ">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">项目名称</span>

                                                            <select class="form-control" v-model="moldeHt.p_id">
                                                                <option selected="selected" value="0">---请选择项目---
                                                                </option>
                                                                <option v-for="sel in list1" :value="sel.p_id">
                                                                    {{sel.p_name}}</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">合同名称</span>
                                                            <select class="form-control" v-model="moldeHt.c_id">
                                                                <option selected="selected" value="0">---请选择合同---
                                                                </option>
                                                                <option v-for="sel in limitData.list" :value="sel.c_id">
                                                                    {{sel.c_name}}</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-dismiss="modal">取消</button>
                                            <button type="button" class="btn btn-primary" data-dismiss="modal"
                                                @click="sumbitmodelChange()">提交</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>


            </section>

            <!-- 右侧内容界面-记录列表 -->
            <section class="content" v-if="!contentTagle">

                <n-content-contract v-on:return="contentReturn" :list="listPro" :project="projectContent"
                    v-on:removeht="removeHt" v-on:refresh="refreshContent" :modelht="moldeHt" v-on:projectht="projectHt"
                    :prolist="list1" v-on:projecthtsumbit="sumbitmodelChange"></n-content-contract>

            </section>
        </div>

        <!-- 回到顶部 -->
        <n-nav-gotop></n-nav-gotop>

        <!-- 底部导航栏 -->
        <n-nav-footer></n-nav-footer>

    </div>

    <!-- REQUIRED JS SCRIPTS -->

    <!-- jQuery -->
    <script src="plugins/jquery/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="plugins/bootstrap/js/bootstrap.min.js"></script>
    <!-- 弹出框插件 toastr.min.js -->
    <script src="plugins/toastr/toastr.min.js"></script>

    <!-- 界面动态显示隐藏 -->
    <script src="plugins/dist/js/app.min.js"></script>


    <!-- 加载Vue公共模块 -->
    <script src="js/vue/commer/vue_commer.js"></script>
    <!-- 项目入库模块 -->
    <script src="js/vue/build/contract.js"></script>

    <script src="js/commer.js"></script>
</body>

</html>